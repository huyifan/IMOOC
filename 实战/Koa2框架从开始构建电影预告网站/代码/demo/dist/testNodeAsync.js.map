{"version":3,"sources":["../src/testNodeAsync.js"],"names":["arr1","arr2","console","log","Promise","resolve","reject","map","v","i","setTimeout","length","asyncPromise","util","require","promisify","cb","asyncPromisify","normal","promise","then"],"mappings":"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","file":"testNodeAsync.js","sourcesContent":["/**\r\n * Created by hugo on 2018/8/22.\r\n */\r\n\r\n//promise()\r\n//asyncPromise()\r\nasyncPromisify()\r\n//normal()\r\n\r\nfunction normal() {\r\n  let arr1 = [0, 1, 2]\r\n  let arr2 = [3, 4, 5]\r\n\r\n  console.log(\"aaa\")\r\n\r\n  arr1.map((v, i) => {\r\n    setTimeout(() => console.log(\"arr1:\" + v)\r\n      , 100)\r\n  })\r\n\r\n  console.log(\"bbb\")\r\n\r\n  arr2.map((v, i) => {\r\n    setTimeout(() => console.log(\"arr2:\" + v)\r\n      , 1)\r\n  })\r\n\r\n  console.log(\"ccc\")\r\n\r\n\r\n}\r\n\r\nfunction promise() {\r\n  let arr1 = [0, 1, 2]\r\n  let arr2 = [3, 4, 5]\r\n\r\n  console.log(\"aaa\")\r\n\r\n\r\n  return new Promise((resolve, reject) => {\r\n    arr1.map((v, i) => {\r\n      setTimeout(() => {\r\n        console.log(\"arr1:\" + v)\r\n        if (i === arr1.length - 1)\r\n          resolve()\r\n      }, 100)\r\n    })\r\n  }).then(() => {\r\n    console.log(\"bbb\")\r\n\r\n    return new Promise((resolve, reject) => {\r\n      arr2.map((v, i) => {\r\n        setTimeout(() => {\r\n          console.log(\"arr1:\" + v)\r\n          if (i === arr1.length - 1) {\r\n            console.log(\"ccc\")\r\n            resolve()\r\n          }\r\n        }, 100)\r\n      })\r\n    })\r\n  })\r\n\r\n}\r\n\r\nasync function asyncPromise() {\r\n  let arr1 = [0, 1, 2]\r\n  let arr2 = [3, 4, 5]\r\n\r\n  console.log(\"aaa\")\r\n\r\n\r\n  await (function () {\r\n    return new Promise((resolve, reject) => {\r\n      arr1.map((v, i) => {\r\n        setTimeout(() => {\r\n          console.log(\"arr1:\" + v)\r\n          if (i === arr1.length - 1)\r\n            resolve()\r\n        }, 100)\r\n      })\r\n    })\r\n  })()\r\n\r\n  console.log(\"bbb\")\r\n\r\n  await(function () {\r\n    return new Promise((resolve, reject) => {\r\n      arr2.map((v, i) => {\r\n        setTimeout(() => {\r\n          console.log(\"arr1:\" + v)\r\n          if (i === arr1.length - 1) {\r\n            console.log(\"ccc\")\r\n            resolve()\r\n          }\r\n        }, 100)\r\n      })\r\n    })\r\n  })()\r\n\r\n\r\n}\r\n\r\n\r\n/*\r\n* promisify会把带有回调函数的函数包装成一个Promise对象返回\r\n* */\r\nasync function asyncPromisify() {\r\n  let util = require('util')\r\n  let arr1 = [0, 1, 2]\r\n  let arr2 = [3, 4, 5]\r\n  console.log(\"aaa\")\r\n\r\n  await (util.promisify(function (cb) {\r\n    arr1.map((v, i) => {\r\n      setTimeout(() => {\r\n        console.log(\"arr1:\" + v)\r\n        if (i === arr1.length - 1)\r\n          cb()\r\n      }, 100)\r\n    })\r\n  }))()\r\n\r\n  console.log(\"bbb\")\r\n\r\n  await (util.promisify(function (cb) {\r\n        arr2.map((v, i) => {\r\n          setTimeout(() => {\r\n            console.log(\"arr1:\" + v)\r\n            if (i === arr1.length - 1) {\r\n              console.log(\"ccc\")\r\n              cb()\r\n            }\r\n          }, 100)\r\n        })\r\n      }\r\n    )\r\n  )()\r\n\r\n\r\n}\r\n"]}